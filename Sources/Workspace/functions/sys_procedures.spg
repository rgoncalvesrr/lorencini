CREATE OR REPLACE VIEW sys_procedures AS
 SELECT
        CASE
            WHEN c.typname = 'trigger'::name THEN 2
            ELSE 1
        END AS tipo, a.proname, sys_paramfunction(a.oid) as params
   FROM pg_proc a
   JOIN pg_language b ON a.prolang = b.oid AND b.lanname = 'plpgsql'::name
   JOIN pg_type c ON c.oid = a.prorettype
  WHERE NOT a.proisagg;