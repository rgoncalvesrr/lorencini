/**
  Validação do C.N.P.J. sem máscara

   Autor	      Fabio Crepaldi Carvalho
   Data        02/06/2006 20:04

   Parâmetro   cnpj  número a validar.

	Histórico
	------------------------------------------------------------------
      13/11/2008 21:37:38  v1.0  Ricardo Gonçalves
         [*] Restrurução da rotina. Uso de expressão regular
*/
Create or Replace Function sys_cnpj(
   in cnpj varchar)
Returns void
as $$
Declare
   ErrorCode integer;
Begin
   ErrorCode := sys_cnpj_check(cnpj);

   if ErrorCode = 1 then
      Raise '[[C.N.P.J. inválido. O CNPJ deve ser composto de 14 números]]';
   end if;

   if ErrorCode = 2 then
      raise '[[C.N.P.J. % inválido. Verifique.]]', mask_00002(cnpj);
   end if;
End;
$$ language 'plpgsql';